{% extends '::layout.html.twig' %}

{% set showLeftMenu = 'no' %}
{% block content %}
	<h1 class="text-center" >Commande
		<small > N°{{ commande.id }}</small >
		{% if is_granted('ROLE_ADMIN') %}
			<a href="{{ path('commande_edit', { 'id': commande.id }) }}" class="btn btn-primary" ><span class="glyphicon glyphicon-pencil" ></span ></a >
		{% endif %}
	</h1 >

	<article class="noPaddingSide" >
		<table class="stylized" >
			<tr >
				<th >Etat</th >
				<td >{{ commande.etat(true) }}</td >
			</tr >
			<tr >
				<th >Date</th >
				<td >{% if commande.date %}{{ commande.date|date('d/m/Y') }}{% endif %}</td >
			</tr >
		</table >
	</article >

	<h3 class="text-center" >Produits</h3 >
	<article class="noPaddingSide panier" >
		<table class="stylized" >
			<tr >
				<th ></th >
				<th >Nom</th >
				<th >Quantité</th >
				<th >Prix</th >
			</tr >
			{% for commandeItem in commande.commandeItems %}
				<tr class="cartProduct" >
					<td >
						<img src="{{ asset("uploads/products/" ~ commandeItem.product.image) }}" class="img-responsive" >
					</td >
					<td class="infoProduct" >
						<h3 >{{ commandeItem.product.name }}</h3 >
					</td >
					<td >{{ commandeItem.qte }}</td >
					<td class="price" >{{ (commandeItem.qte * commandeItem.price)|number_format(2, ',', ' ') }} €</td >
				</tr >
			{% endfor %}
			<tr class="mainColorAcent" >
				<td colspan="3" ></td >
				<td class="price" >
					<small >TOTAL:</small >
					<br />
					{{ commande.total|number_format(2, ',', ' ') }} €
				</td >
			</tr >
		</table >
	</article >

	<ul >
		<li >
			<a href="{{ path('commande_index') }}" >Back to the list</a >
		</li >
		<li >
			{% if delete_form | length > 0 %}
				{{ form_start(delete_form) }}
				<input type="submit" value="Delete" >
				{{ form_end(delete_form) }}
			{% endif %}
		</li >
	</ul >
{% endblock %}
